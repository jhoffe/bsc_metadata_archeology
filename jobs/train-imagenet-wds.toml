queue = "gpuv100"
name = "train-imagenet"
walltime = { hours = 24, minutes = 0 }
cpu = 16
single_host = true
memory = 8
standard_output = { name = "logs/train-imagenet-2x-wds.out", overwrite = true }
error_output = { name = "logs/train-imagenet-2x-wds.err", overwrite = true }
use_gpu = { num_of_gpus = 2 }

commands = [
    "module load python3/3.10.7",
    "module load cuda/11.7",
    "source venv/bin/activate",
    """python3 src/models/train_model.py \
       trainer=hpc \
       trainer.log_loss_curves=false \
       dataset=imagenet_wds \
       model=imagenet-resnet50-wds \
       name=imagenet-resnet-50-wds-2x"""
]
